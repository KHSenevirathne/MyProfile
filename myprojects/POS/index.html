<!DOCTYPE html>
<html lang="en">
<style>
    #btnSearch {
        position: relative;
        left: 40%;
        top: -37px;
        width: 150px;
    }
    #btnSearchItem {
        position: relative;
        left: 40%;
        top: -37px;
        width: 150px;
    }

</style>

<head>
    <meta charset="UTF-8">
    <title>POS System</title>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link href="assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">
</head>
<body style="overflow-y:scroll;">

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
        <a class="navbar-brand fw-bolder text-white brandName" href="#">Kesh Store</a>
        <button aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"
                class="navbar-toggler"
                data-bs-target="#navbarSupportedContent" data-bs-toggle="collapse" type="button">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item" id="navHome">
                    <a aria-current="page" class="nav-link active" style="cursor: pointer">Home</a>
                </li>

                <li class="nav-item" id="navCustomer">
                    <a aria-current="page" class="nav-link active" style="cursor: pointer; color: #ffffff;">Customer</a>
                </li>
                <li class="nav-item" id="navItem">
                    <a aria-current="page" class="nav-link active" style="cursor: pointer; color: #ffffff;">Item</a>
                </li>

                <li class="nav-item dropdown">
                    <a aria-expanded="false" class="nav-link dropdown-toggle text-white" data-bs-toggle="dropdown"
                       href="#"
                       id="navbarDropdown" role="button">
                        Order
                    </a>
                    <ul aria-labelledby="navbarDropdown" class="dropdown-menu">
                        <li class="nav-item" id="navOrders">
                            <a aria-current="page" class="nav-link active" style="cursor: pointer; color: #000000;">Place Order</a>
                        </li>
                        <li>
                            <hr class="dropdown-divider" style="color: black">
                        </li>
                        <li class="nav-item" id="navPlacedOrders">
                            <a aria-current="page" class="nav-link active" style="cursor: pointer; color: #000000;">Orders</a>
                        </li>
                    </ul>
                </li>

            </ul>
        </div>
    </div>
</nav>
<section id="home">
    <style>
        body {
            background-image: url('assets/img/bg.jpg');
            background-attachment: fixed;
        }
    </style>
    <img src="assets/img/store.jpg"
         width="1500"
         height="700" />
</section> <!--Home-->
<section id="customer">
    <h2 style="background-color:powderblue;">* Customer</h2>

    <section class="container overflow-hidden">
        <button class="badge bg-dark mt-1 btn btn-primary" data-bs-target="#exampleModal" data-bs-toggle="modal"
                data-bs-whatever="@getbootstrap" type="button">Add new Customer
        </button>
        <button class="badge bg-danger mt-1">View all customers</button>
        <div class="align bg-light mt-1">
            <h4 class="mt-3" style="background-color: #00008B; color: #ffffff">Search Customer</h4>

            <!--<form class="row gy-2 gx-3 align-items-center">-->
                <div class="col-auto">
                    <!--<label class="visually-hidden" for="autoSizingInput">Name</label>-->
                    <input class="form-control" id="txtSearchCusID" placeholder="search"
                           type="text" style="width: 500px">
                    <!--<input class="form-control" id="txtSearchCusID1" placeholder="search"
                           type="text">
                    <input type="text" placeholder="search" style="width: 500px">-->
                </div>
                <!--<div class="col-auto">
                    <label class="visually-hidden" for="autoSizingSelect">Preference</label>
                    <select class="form-select" id="autoSizingSelect">
                        <option value="1">Name</option>
                        <option value="2">NIC</option>
                        <option value="3">Address</option>
                    </select>
                </div>-->
                <div class="col-auto">
                    <button class="btn btn-primary" type="button" id="btnSearch">Search</button>
                </div>
                <div>
                    <button class="btn btn-primary mt-1" id="updateCustomer" style="background: #0000CD" type="reset" data-bs-target="#exampleModal" data-bs-toggle="modal"
                            data-bs-whatever="@getbootstrap">Update</button>
                    <button class="btn btn-primary mt-1" id="deleteCustomer"  style="background: #ff0000" type="reset">Delete</button>
                </div>
           <!-- </form>-->
        </div>
    </section>

    <section>

        <div aria-hidden="true" aria-labelledby="exampleModalLabel" class="modal fade" id="exampleModal" tabindex="-1" >
            <div class="modal-dialog">
                <div class="modal-content" style="background-color: #3bb4db">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel" style="color: white; font-weight: bolder">New
                            Customer</h5>
                        <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="mb-3">
                                <label class="col-form-label" for="custID" style="color: white;">Customer ID:</label>
                                <input class="form-control" id="custID" type="text">
                                <p><small class="text-danger pl-1" id="lblcusid"></small></p>
                            </div>
                            <div class="mb-3">
                                <label class="col-form-label" for="custName" style="color: white;">Customer
                                    Name:</label>
                                <input class="form-control" id="custName" type="text">
                                <p><small class="text-danger pl-1" id="lblcusname"></small></p>
                            </div>
                            <div class="mb-3">
                                <label class="col-form-label" for="nic" style="color: white;">Customer NIC:</label>
                                <input class="form-control" id="nic" type="text">
                                <p><small class="text-danger pl-1" id="lblcusNIC"></small></p>
                            </div>
                            <div class="mb-3">
                                <label class="col-form-label" for="address" style="color: white;">Customer
                                    Address:</label>
                                <input class="form-control" id="address" type="text">
                                <p><small class="text-danger pl-1" id="lblcusAddress"></small></p>
                            </div>

                            <div class="mb-3">
                                <label class="col-form-label" for="contact" style="color: white;">Customer
                                    Contact:</label>
                                <input class="form-control" id="contact" type="text">
                                <p><small class="text-danger pl-1" id="lblcusContact"></small></p>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" data-bs-dismiss="modal" style="background-color: #565e64"
                                type="button">Close
                        </button>
                        <button class="btn btn-primary" style="background-color: darkgreen" type="button" id="renew">Renew</button>
                        <button class="btn btn-primary" id="btnSaveOrUpdate" style="background-color: darkblue"
                                type="button">Save Customer
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="shadow-lg">
        <div class="col" >
            <table class="table table-dark table-striped table-hover mt-5">
                <thead class="bg-danger text-white">
                <tr>
                    <th>Customer ID</th>
                    <th>Customer Name</th>
                    <th>NIC</th>
                    <th>Address</th>
                    <th>Contact</th>
                </tr>
                </thead>
                <tbody id="customerTable">


                </tbody>
            </table>
        </div>
    </section>
</section> <!--customer-->
<section id="item">


    <div class="m-2">
        <h2 style="background-color:powderblue;">*  Item</h2>
    </div>


    <section class="container overflow-hidden">
        <div class="container flex-row d-flex justify-content-end ">
            <button class="badge bg-dark mt-1 btn btn-primary" data-bs-target="#exampleModal1" data-bs-toggle="modal"
                    data-bs-whatever="@getbootstrap" type="button">Add new Item
            </button>
            <button class="badge bg-danger mt-1 ">View all Items</button>
        </div>

        <div class="align bg-light mt-1">
            <h4 class="mt-3" style="background-color: #00008B; color: #ffffff">Search Item</h4>

                <div class="col-auto">
                    <input class="form-control" id="txtItemID" placeholder="search"
                           type="text" style="width: 500px">
                </div>
               <!-- <div class="col-auto">
                    <label class="visually-hidden" for="autoSizingSelect">Preference</label>
                    <select class="form-select" id="autoSizingSelect">
                        <option value="1">Name</option>
                        <option value="2">price</option>
                    </select>
                </div>-->
                <div class="col-auto">
                    <button class="btn btn-primary" type="button" id="btnSearchItem">Search</button>
                </div>
                <div>
                    <button class="btn btn-primary mt-1" style="background: #010bc9" type="reset" id="updateItem" data-bs-target="#exampleModal1" data-bs-toggle="modal"
                            data-bs-whatever="@getbootstrap">Update</button>
                    <button class="btn btn-primary mt-1" style="background: #ee0216" type="reset" id="deleteItem">Delete</button>
                </div>
        </div>
    </section>

    <section class="shadow-lg">
        <div class="col">
            <table class="table table-dark table-striped table-hover mt-5">
                <thead class="bg-danger text-white">
                <tr>
                    <th>Item Code</th>
                    <th>Item Name</th>
                    <th>Price (Rs)</th>
                    <th>Quantity</th>
                </tr>
                </thead>
                <tbody id="itemTable">


                </tbody>
            </table>
        </div>
    </section>

    <section>

        <div aria-hidden="true" aria-labelledby="exampleModalLabel" class="modal fade" id="exampleModal1" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content" style="background-color: #3bb4db">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel2" style="color: white; font-weight: bolder">New
                            Item</h5>
                        <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="mb-3">
                                <label class="col-form-label" for="iCode" style="color: white">Item Code:</label>
                                <input class="form-control" id="iCode" type="text">
                            </div>
                            <div class="mb-3">
                                <label class="col-form-label" for="itemName" style="color: white">Item Name:</label>
                                <input class="form-control" id="itemName" type="text">
                            </div>
                            <div class="mb-3">
                                <label class="col-form-label" for="Iprice" style="color: white">Item Price:</label>
                                <input class="form-control" id="Iprice" type="text">
                            </div>
                            <div class="mb-3">
                                <label class="col-form-label" for="Iqty" style="color: white">Item Quantity:</label>
                                <input class="form-control" id="Iqty" type="text">
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" data-bs-dismiss="modal" style="background-color: #565e64"
                                type="button">Close
                        </button>
                        <button class="btn btn-primary" style="background-color: darkgreen" type="button" id="renewItem">Renew</button>
                        <button class="btn btn-primary" id="saveItem" style="background-color: darkblue" type="button">
                            Save Item
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>
</section> <!--Item-->
<section id="orders">
    <h3 style="background-color:powderblue;">*  Order Form</h3>
    <section class="row d-flex flex-row justify-content-around">

        <div class="shadow-lg col-4 mt-2" style="width: 500px; height:400px; border: 3px solid #4ed429">
            <div style="background-color: #1a1e21; height: 26px; width: 100%">
                <h5 class="mt-2" style="color: white">Invoice Details</h5>
            </div>

            <div class="row">
                <div class="col-md-6 mt-1">
                    <label class="form-label" for="inputOrderID">Order ID</label>
                    <input class="form-control" id="inputOrderID" type="email">
                </div>
                <div class="col-md-6 mt-1">
                    <label class="form-label" for="inputDate">Date</label>
                    <input class="form-control" id="inputDate" type="date">
                </div>
                <div class="col-md-6 mt-2">
                    <label class="form-label" for="inputState">Customer ID</label>
                    <select class="form-select" id="inputState">
                        <!-- <option>C001</option>
                         <option>C002</option>
                         <option>C003</option>-->
                    </select>
                </div>
                <div class="col-md-6 mt-2">
                    <label class="form-label" for="inputId">ID</label>
                    <input class="form-control" id="inputId" type="text" disabled>
                </div>
                <div class="col-md-6 mt-2">
                    <label class="form-label" for="inputName">Name</label>
                    <input class="form-control" id="inputName" type="text" disabled>
                </div>
                <div class="col-md-6 mt-2">
                    <label class="form-label" for="inputContact">Contact</label>
                    <input class="form-control" id="inputContact" type="text" disabled>
                </div>
                <div class="col-md-12 mt-2">
                    <label class="form-label" for="inputAddress">Address</label>
                    <input class="form-control" id="inputAddress" type="text" disabled>
                </div>
            </div>
        </div>

        <div class="shadow-lg col-4 mt-2" style="width: 500px; height: 400px; background-color:#a8a8a8">
            <div style="background-color: #1a1e21; height: 28px; width: 100%">
                <h5 class="mt-2" style="color: white">Item Select</h5>
            </div>


            <div class="row">
                <div class="col-md-6 mt-2">
                    <label class="form-label" for="selectItem">Item</label>
                    <select class="form-select" id="selectItem">
                        <!--<option>I001</option>
                        <option>I002</option>
                        <option>I003</option>-->
                    </select>
                </div>
                <div class="col-md-6 mt-1">
                    <label class="form-label" for="inputItemCode">Item Code</label>
                    <input class="form-control" id="inputItemCode" type="text" disabled>
                </div>
                <div class="col-md-4 mt-2">
                    <label class="form-label" for="inputIName">Name</label>
                    <input class="form-control" id="inputIName" type="text" disabled>
                </div>
                <div class="col-md-4 mt-2">
                    <label class="form-label" for="inputQTY">Qty On Hand</label>
                    <input class="form-control" id="inputQTY" type="text" disabled>
                </div>
                <div class="col-md-4 mt-2">
                    <label class="form-label" for="inputPrice">Price</label>
                    <input class="form-control" id="inputPrice" type="text" disabled>
                </div>
                <div class="col-md-12 mt-2">
                    <label class="form-label" for="inputOrderQTY">Order Quantity</label>
                    <input class="form-control" id="inputOrderQTY" type="text">
                </div>
                <div class="row mt-3 m-1">
                    <button class="btn btn-primary mt-1" id="btnAddToCart"
                            style="font-family: Times; font-weight: bolder; background-color: #14b414"
                            type="reset">Add To Cart
                    </button>
                </div>
            </div>
        </div>

        <div class="shadow-lg col-3 mt-2"
             style="width: 500px; height: 400px; background-color:#020101;  border: 3px solid #000000">
            <div class="mt-3 m-4">
                <h5 id="totalPrice" style="color: #fcfcfc; font-family: 'Adobe Fangsong Std R'; font-size: 35px">Total
                    Price :
                    Rs.0.00 </h5>
                <h5 id="subTotal" style="color: #ce0303; font-family: 'Times New Roman'; font-size: 35px">Sub Total- :
                    Rs.0.00 </h5>
            </div>

            <div class="row">
                <div class="col-md-6 mt-2">
                    <label class="form-label" for="inputDiscount" style="color: white">Discount (Rs)</label>
                    <input class="form-control" id="inputDiscount" type="text">
                </div>

                <div class="col-md-6 mt-2">
                    <label class="form-label" for="inputCash" style="color: white">Cash (Rs)</label>
                    <input class="form-control" id="inputCash" type="text">
                </div>

                <div class="col-md-12 mt-2">
                    <label class="form-label" for="inputBalance" style="color: white" >Balance (Rs)</label>
                    <input class="form-control" id="inputBalance" type="text" >
                </div>

                <div class="d-flex flex-row justify-content-center mt-4">
                    <button class="btn btn-primary mt-1" id="purchase"
                            style="font-weight: bolder; background-color: #031dc9"
                            type="reset">Purchase
                    </button>
                </div>

            </div>


        </div>

    </section>

    <section class="shadow-lg">
        <table class="table table-dark table-striped table-hover mt-5 bg-light">
            <thead>
            <tr>
                <th scope="col">Item Code</th>
                <th scope="col">Item Name</th>
                <th scope="col">Quantity</th>
                <th scope="col">Price(per unit)</th>
                <th scope="col">Total (Rs)</th>
            </tr>
            </thead>
            <tbody id="orderTable">

            </tbody>
        </table>

    </section>
</section> <!--Orders-->
<section id="orderDetails">
    <h2 style="background-color:powderblue;">*  Placed Order Details</h2>

    <h3>Orders</h3>
    <h6 class="mt-3" style="position:relative; left: 350px">Search Order</h6>

    <div class="col-auto">
        <input class="form-control" id="txtSearchOrder" placeholder="Order ID"
               type="text" style="width: 500px; left: 466px; top: -36px; position: relative;">
    </div>
    <div  style="position:relative; width: 90%; height: 200px; left: 70px; overflow: auto; background-color: #dcdbdb">
        <section class="shadow-lg">
            <div class="col">
                <table class="table table-hover mt-3 table-bordered table table-dark border-danger">
                    <thead class="text-white">
                    <tr>
                        <th>Order Code</th>
                        <th>Order Date</th>
                        <th>Total Price(Rs)</th>
                    </tr>
                    </thead>
                    <tbody id="tOrder">

                    </tbody>
                </table>
            </div>
        </section>
    </div>


    <h3 style="background-color:powderblue;">*  Order Details</h3>

    <div style="position:relative; height: 200px">
        <section class="shadow-lg">
            <div class="col">
                <table class="table table-dark table-striped table-hover mt-3">
                    <thead class="bg-danger text-white">
                    <tr>
                        <th>Item Code</th>
                        <th>Item Name</th>
                        <th>Order QTY</th>
                        <th>Price per unit(Rs)</th>
                        <th>Total Price(Rs)</th>
                    </tr>
                    </thead>
                    <tbody id="tOrderDetails">

                    </tbody>
                </table>
            </div>
        </section>
    </div>


</section> <!--Order Detail-->

<script src="assets/jQuery/jquery-3.6.0.min.js"></script>
<script src="assets/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="db/db.js"></script>
<script src="model/CustomerDTO.js"></script>
<script src="model/ItemDTO.js"></script>
<script src="model/OrderDetailDTO.js"></script>
<script src="model/OrderDTO.js"></script>
<script src="assets/sweet%20alert/sweetalert.min.js"></script>
<script src="controller/CustomerController.js"></script>
<script src="controller/ItemController.js"></script>
<script src="controller/PlaceOrderController.js"></script>
<script src="controller/OrderController.js"></script>

<script>

    document.getElementById("home").style.display = "block";
    document.getElementById("customer").style.display = "none";
    document.getElementById("item").style.display = "none";
    document.getElementById("orders").style.display = "none";
    document.getElementById("orderDetails").style.display = "none";

    document.getElementById("navHome").addEventListener("click", function () {
        document.getElementById("home").style.display = "block";
        document.getElementById("customer").style.display = "none";
        document.getElementById("item").style.display = "none";
        document.getElementById("orders").style.display = "none";
        document.getElementById("orderDetails").style.display = "none";
    });

    document.getElementById("navCustomer").addEventListener("click", function () {
        document.getElementById("home").style.display = "none";
        document.getElementById("customer").style.display = "block";
        document.getElementById("item").style.display = "none";
        document.getElementById("orders").style.display = "none";
        document.getElementById("orderDetails").style.display = "none";
    });

    document.getElementById("navItem").addEventListener("click", function () {
        document.getElementById("home").style.display = "none";
        document.getElementById("customer").style.display = "none";
        document.getElementById("item").style.display = "block";
        document.getElementById("orders").style.display = "none";
        document.getElementById("orderDetails").style.display = "none";
    });

    document.getElementById("navOrders").addEventListener("click", function () {
        document.getElementById("home").style.display = "none";
        document.getElementById("customer").style.display = "none";
        document.getElementById("item").style.display = "none";
        document.getElementById("orderDetails").style.display = "none";
        document.getElementById("orders").style.display = "block";

        setCustomerIdsToComboBox();
        setItemIdsToComboBox();
        setOrderID();
    });

    function setCustomerIdsToComboBox() {
        $("#inputState").empty();
        $("#inputState").append(new Option("-Select Customer-", ""));
        for (let i = 0; i < customerDB.length; i++) {
            $("#inputState").append(new Option(customerDB[i].getID(), i));
        }
    }
    function setItemIdsToComboBox() {
        $("#selectItem").empty();
        $("#selectItem").append(new Option("-Select Item-", ""));
        for (let i = 0; i < itemDB.length; i++) {
            $("#selectItem").append(new Option(itemDB[i].getItemCode(), i));
        }
    }
    document.getElementById("navPlacedOrders").addEventListener("click", function () {
        document.getElementById("home").style.display = "none";
        document.getElementById("customer").style.display = "none";
        document.getElementById("item").style.display = "none";
        document.getElementById("orderDetails").style.display = "block";
        document.getElementById("orders").style.display = "none";

        loadAllOrderDetails();
        loadOrderDetailTable();
    });

</script>

</body>
</html>
